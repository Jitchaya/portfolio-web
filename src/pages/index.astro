---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import PageShell from '../components/PageShell.astro';
import Hero from '../components/Hero.astro';
import ProjectCard from '../components/ProjectCard.astro';
import BlogCard from '../components/BlogCard.astro';
import AboutMe from '../components/AboutMe.astro';
import ContactSection from '../components/ContactSection.astro';
import SectionHeading from '../components/SectionHeading.astro';
import Footer from '../components/Footer.astro';

const allProjects = (await getCollection('projects')).sort(
  (a, b) => (a.data.order ?? 99) - (b.data.order ?? 99)
);
const projects = allProjects.slice(0, 3);

const allBlogs = (await getCollection('blogs')).sort(
  (a, b) => b.data.date.getTime() - a.data.date.getTime()
);
const blogs = allBlogs.slice(0, 3);
---

<Layout title="Jitchaya Veerachodthada | Portfolio">
  <PageShell>
    <!-- Home Section -->
    <section id="home" class="py-16 lg:py-24">
      <Hero />
    </section>

    <!-- About Me Section -->
    <section id="about" class="py-16 lg:py-24">
      <AboutMe />
    </section>

    <!-- Projects Section -->
    <section id="projects" class="py-16 lg:py-24">
      <SectionHeading
        title="Check out my latest work"
        subtitle="I've worked on a variety of projects, from simple websites to complex web applications. Here are a few of my favorites."
      />

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
        {projects.map((project) => (
          <ProjectCard
            title={project.data.title}
            description={project.data.description}
            image={project.data.image}
            tags={project.data.tags}
            link={project.data.link}
            demoUrl={project.data.demoUrl}
            sourceUrl={project.data.sourceUrl}
            dateRange={project.data.dateRange}
          />
        ))}
      </div>

      <!-- View All Projects -->
      <div class="text-center">
        <a
          href="/project"
          class="inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 font-medium hover:bg-primary hover:text-slate-900 transition-all"
        >
          View All Projects
          <span class="material-symbols-outlined text-[18px]">arrow_forward</span>
        </a>
      </div>
    </section>

    <!-- Blog Section -->
    <section id="blog" class="py-16 lg:py-24">
      <SectionHeading
        title="Latest Blog Posts"
        subtitle="Thoughts, insights, and tutorials on web development, design, and technology."
      />

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
        {blogs.map((blog) => (
          <BlogCard
            title={blog.data.title}
            description={blog.data.description}
            date={blog.data.date}
            tags={blog.data.tags}
            image={blog.data.image}
            slug={blog.id}
          />
        ))}
      </div>

      <!-- View All Posts -->
      <div class="text-center">
        <a
          href="/blog"
          class="inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 font-medium hover:bg-primary hover:text-slate-900 transition-all"
        >
          View All Posts
          <span class="material-symbols-outlined text-[18px]">arrow_forward</span>
        </a>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 lg:py-24">
      <ContactSection />
    </section>

    <!-- Footer -->
    <Footer />
  </PageShell>
</Layout>
